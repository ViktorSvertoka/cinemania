{"mappings":"+oBAAA,IAAAA,EAAAC,EAAA,S,aACMC,QAESC,eAAAC,EAAiCC,GAEnB,MAArBC,EAAYC,SAASC,cAAc,gBAEzC,IAAIC,EAAS,GACb,IAAK,MAAMC,KAASL,EAAQ,CAC1B,MAAMM,GACJA,EACAC,YAAaC,EAAMC,MACnBA,EACAC,aAAcC,EACdC,aAAcC,GACZR,EAGoD,GAAzC,OAAXG,IAAoBA,EACtB,SASgBJ,GAAR,iEAtBO,mCAiBaI,WAMgBC,0FAEpBA,4CAPDK,EAASR,kBACVS,EAAQJ,gDACPK,EAAiBH,uD,CAY5CZ,EAAUgB,UAAYb,C,CAIPN,eAAFiB,EAAQG,GACrB,IAAKA,EACH,MAAO,2BAIT,aADmBA,EAAKC,MAAM,EAAG,E,CAKhBrB,eAAJgB,EAASM,GAItB,IACE,MAAMC,QAAiBC,EAAMC,IAAI,sCAASH,IAAW,CACnDI,OAAQ,CACNC,QANU,sCAUd,GAAoC,IAAhCJ,EAASH,KAAKQ,OAAOC,OACvB,OAAOC,MAQT,OALeP,EAASH,KAAKQ,OAC1BP,MAAM,EAAG,GACTU,KAAIC,GAASA,EAAMC,OACnBC,KAAK,K,CAGR,MAAOJ,GAEP,OADAK,QAAQC,IAAIN,GACL,qB,EAKX,SAASZ,EAAiBE,GACxB,IAAIiB,EAAc,GAElB,IAAKjB,EAEH,OADAiB,EAAc,GAAGxC,EAAAyC,UAAUC,OAAO,KAC3B,QAAQF,UAKjB,OAFeG,KAAKC,MAAMrB,IAGxB,KAAK,EACHiB,EAAc,GAAGxC,EAAAyC,UAAUC,OAAO,KAClC,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA6C,WAAW7C,EAAAyC,UAAUC,OAAO,KAC7C,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,WAAW9C,EAAAyC,UAAUC,OAAO,KAC7C,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,WAAW9C,EAAA6C,WAAW7C,EAAAyC,UAAUC,OAAO,KACxD,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAAyC,UAAUC,OAAO,KACvD,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAA6C,WAAW7C,EAAAyC,UAAUC,OAAO,KAClE,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAAyC,UAAUC,OAAO,KACvD,MACF,KAAK,EACHF,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAA6C,WAAW7C,EAAAyC,YACjD,MACF,KAAK,EACHD,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAAyC,YACtC,MACF,KAAK,EACHD,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KAAK1C,EAAA6C,WACtC,MACF,KAAK,GACHL,EAAc,GAAGxC,EAAA8C,SAASJ,OAAO,KACjC,MACF,QACE,MAAM,IAAIK,MAAM,kBAGpB,MAAO,QAAQP,S,qLChIjB,MAAMQ,EAAY,okBAUZC,EAAW,olBAUXC,EAAW,+7B","sources":["src/js/cards-rendering.js","src/js/stars.js"],"sourcesContent":["import { emptyStar, fullStar, halfStar } from './stars';\nconst axios = require('axios').default;\n\nexport default async function renderMoviesCards(movies) {\n  // в каталоге рендерится в ul c классом cards__list\n  const movieList = document.querySelector('.cards__list');\n  const POSTER_URL = 'https://image.tmdb.org/t/p/w500/';\n  let markup = '';\n  for (const movie of movies) {\n    const {\n      id,\n      poster_path: poster,\n      title,\n      release_date: date,\n      vote_average: rating,\n    } = movie;\n\n    // Проверка на картинку, можно что-то придумать чтоб грузилось другое\n    if (poster === null || !poster) {\n      continue; // пропускаем фильм без картинки\n    }\n\n    \n    const movieImg = POSTER_URL + poster;\n    const movieGenre = await getGenre(id);\n    const movieYear = await getYear(date);\n    const starRating = await createStarRating(rating);\n    // Надо добавить классы\n    markup += `<li class='cards__list__item'>\n                    <img src='${movieImg}' alt='${title}' width='395' height='574' />\n                    <div>\n                        <h3>${title}</h3>\n                        <p>${movieGenre} <span>${movieYear}</span></p>\n                        ${starRating}\n                    </div>\n                </li>`;\n  }\n\n  movieList.innerHTML = markup;\n}\n\n// Получает год из даты\nasync function getYear(data) {\n  if (!data) {\n    return 'There is no release date';\n  }\n\n  const year = await data.slice(0, 4);\n  return year;\n}\n\n// Получает жанры фильма\nasync function getGenre(movieId) {\n  const API_KEY = '992758a4802a699e8df27d4d6efc34fb';\n  const URL = 'https://api.themoviedb.org/3/movie/';\n\n  try {\n    const response = await axios.get(`${URL}${movieId}`, {\n      params: {\n        api_key: API_KEY,\n      },\n    });\n\n    if (response.data.genres.length === 0) {\n      return error;\n    }\n\n    const genres = response.data.genres\n      .slice(0, 2)\n      .map(genre => genre.name)\n      .join(', ');\n\n    return genres;\n  } catch (error) {\n    console.log(error);\n    return 'There are no genres';\n  }\n}\n\n// Преобразует рейтинг в рейтинг из звезд\nfunction createStarRating(data) {\n  let ratingStars = '';\n\n  if (!data) {\n    ratingStars = `${emptyStar.repeat(5)}`;\n    return `<div>${ratingStars}</div>`;\n  }\n\n  const rating = Math.round(data);\n\n  switch (rating) {\n    case 0:\n      ratingStars = `${emptyStar.repeat(5)}`;\n      break;\n    case 1:\n      ratingStars = `${halfStar}${emptyStar.repeat(4)}`;\n      break;\n    case 2:\n      ratingStars = `${fullStar}${emptyStar.repeat(4)}`;\n      break;\n    case 3:\n      ratingStars = `${fullStar}${halfStar}${emptyStar.repeat(3)}`;\n      break;\n    case 4:\n      ratingStars = `${fullStar.repeat(2)}${emptyStar.repeat(3)}`;\n      break;\n    case 5:\n      ratingStars = `${fullStar.repeat(2)}${halfStar}${emptyStar.repeat(2)}`;\n      break;\n    case 6:\n      ratingStars = `${fullStar.repeat(3)}${emptyStar.repeat(2)}`;\n      break;\n    case 7:\n      ratingStars = `${fullStar.repeat(3)}${halfStar}${emptyStar}`;\n      break;\n    case 8:\n      ratingStars = `${fullStar.repeat(4)}${emptyStar}`;\n      break;\n    case 9:\n      ratingStars = `${fullStar.repeat(4)}${halfStar}`;\n      break;\n    case 10:\n      ratingStars = `${fullStar.repeat(5)}`;\n      break;\n    default:\n      throw new Error('Invalid rating');\n  }\n\n  return `<div>${ratingStars}</div>`;\n}\n","const emptyStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_405_766)\" stroke-linejoin=\"round\"/>\n<defs>\n<linearGradient id=\"paint0_linear_405_766\" x1=\"3.375\" y1=\"2.625\" x2=\"13.5\" y2=\"16.5\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\nconst fullStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"rgba(248, 65, 25, 1)\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_405_766)\" stroke-linejoin=\"round\"/>\n<defs>\n<linearGradient id=\"paint0_linear_405_766\" x1=\"3.375\" y1=\"2.625\" x2=\"13.5\" y2=\"16.5\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\nconst halfStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_148_6991)\" stroke-linejoin=\"round\"/>\n<path d=\"M9 1.6875V12.7969L4.14844 16.3125L6.04688 10.6875L1.125 7.3125H7.17188L9 1.6875Z\" fill=\"url(#paint1_linear_148_6991)\"/>\n<defs>\n<linearGradient id=\"paint0_linear_148_6991\" x1=\"3.04877\" y1=\"2.73251\" x2=\"13.478\" y2=\"16.7124\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n<linearGradient id=\"paint1_linear_148_6991\" x1=\"2.08688\" y1=\"2.73251\" x2=\"12.1506\" y2=\"9.47748\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\n\nexport { emptyStar, fullStar, halfStar };"],"names":["$1K14w","parcelRequire","default","async","$a6921166aaa683a4$export$2e2bcd8739ae039","movies","movieList","document","querySelector","markup","movie","id","poster_path","poster","title","release_date","date","vote_average","rating","$a6921166aaa683a4$var$getGenre","$a6921166aaa683a4$var$getYear","$a6921166aaa683a4$var$createStarRating","innerHTML","data","slice","movieId","response","$a6921166aaa683a4$require$axios","get","params","api_key","genres","length","error","map","genre","name","join","console","log","ratingStars","emptyStar","repeat","Math","round","halfStar","fullStar","Error","$144aeb2db80114e2$export$2b9da15ffb823cb5","$144aeb2db80114e2$export$cf0b3d5a3c4c1ede","$144aeb2db80114e2$export$2f488d1c4c14505e"],"version":3,"file":"index.de6fa69c.js.map"}