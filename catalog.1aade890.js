var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequire27df;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,r.call(s.exports,s,s.exports),s.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},e.parcelRequire27df=r);var s=r("2shzp");var n=r("1K14w"),i=(s=r("2shzp")).default;async function o(e){const t=document.querySelector(".cards__list");let a="";for(const t of e){const{id:e,poster_path:r,title:s,release_date:n,vote_average:i}=t;if(null===r||!r)continue;a+=`<li class='cards__list__item'>\n                    <img src='${"https://image.tmdb.org/t/p/w500/"+r}' alt='${s}' width='395' height='574' />\n                    <div>\n                        <h3>${s}</h3>\n                        <p>${await c(e)} <span>${await l(n)}</span></p>\n                        ${await d(i)}\n                    </div>\n                </li>`}t.innerHTML=a}function l(e){return e?year=e.slice(0,4):"There is no release date"}async function c(e){try{const t=await i.get(`https://api.themoviedb.org/3/movie/${e}`,{params:{api_key:"992758a4802a699e8df27d4d6efc34fb"}});if(0===t.data.genres.length)return error;return t.data.genres.slice(0,2).map((e=>e.name)).join(", ")}catch(e){return console.log(e),"There are no genres"}}function d(e){let t="";if(!e)return t=`${n.emptyStar.repeat(5)}`,`<div>${t}</div>`;switch(Math.round(e)){case 0:t=`${n.emptyStar.repeat(5)}`;break;case 1:t=`${n.halfStar}${n.emptyStar.repeat(4)}`;break;case 2:t=`${n.fullStar}${n.emptyStar.repeat(4)}`;break;case 3:t=`${n.fullStar}${n.halfStar}${n.emptyStar.repeat(3)}`;break;case 4:t=`${n.fullStar.repeat(2)}${n.emptyStar.repeat(3)}`;break;case 5:t=`${n.fullStar.repeat(2)}${n.halfStar}${n.emptyStar.repeat(2)}`;break;case 6:t=`${n.fullStar.repeat(3)}${n.emptyStar.repeat(2)}`;break;case 7:t=`${n.fullStar.repeat(3)}${n.halfStar}${n.emptyStar}`;break;case 8:t=`${n.fullStar.repeat(4)}${n.emptyStar}`;break;case 9:t=`${n.fullStar.repeat(4)}${n.halfStar}`;break;case 10:t=`${n.fullStar.repeat(5)}`;break;default:throw new Error("Invalid rating")}return`<div>${t}</div>`}const u=document.querySelector(".cards__list"),h=document.querySelector(".cards__message"),y=document.getElementById("search-form"),g=document.getElementById("searchQuery"),p=new class{constructor(){this.key="992758a4802a699e8df27d4d6efc34fb",this.baseURL="https://api.themoviedb.org/3/",this.page=1}incrementPage(){this.page+=1}resetPage(){this.page=1}async getTrends(e){try{const t=await s.default.get(`${this.baseURL}trending/movie/${e}?api_key=${this.key}`);return console.log(t.data.results),t.data.results}catch(e){console.log(e)}}async getUpcoming(){try{const e=await s.default.get(`${this.baseURL}movie/upcoming?api_key=${this.key}`);return console.log(e.data.results),e.data.results}catch(e){console.log(e)}}async searchMovieByQuery(e){try{const t=await s.default.get(`${this.baseURL}search/movie?api_key=${this.key}&query=${e}`);return this.incrementPage(),console.log(t.data.results),t.data.results}catch(e){console.log(e)}}async getMovieInfo(e){try{const t=await s.default.get(`${this.baseURL}movie/${e}?api_key=${this.key}`);return console.log(t.data),t.data}catch(e){console.log(e)}}async getMovieTrailer(e){try{const t=await s.default.get(`${this.baseURL}movie/${e}/videos?api_key=${this.key}`);return console.log(t.data.results[0]),t.data.results[0]}catch(e){console.log(e)}}async getGenresList(){try{const e=await s.default.get(`${this.baseURL}genre/movie/list?api_key=${this.key}`);return console.log(e.data.genres),e.data.genres}catch(e){console.log(e)}}async getMovieContries(){try{const e=await s.default.get(`${this.baseURL}configuration/countries?api_key=${this.key}`);return console.log(e.data),e.data}catch(e){console.log(e)}}};!async function(){try{const e=await p.getTrends("week");if(0===e.length||!e)return error;o(e.slice(0,10))}catch(e){console.log(e),u.classList.add("visually-hidden"),h.classList.remove("visually-hidden")}}(),y.addEventListener("submit",(function(e){if(e.preventDefault(),u.innerHTML="",searchValue=g.value.trim(),!searchValue)return;u.classList.remove("visually-hidden"),h.classList.add("visually-hidden"),async function(e){try{const t=await p.searchMovieByQuery(e);if(0===t.length||!t)return error;o(t.slice(0,10))}catch(e){console.log(e),u.classList.add("visually-hidden"),h.classList.remove("visually-hidden")}}(searchValue)}));
//# sourceMappingURL=catalog.1aade890.js.map
