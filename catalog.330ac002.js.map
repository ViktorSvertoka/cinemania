{"mappings":"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","sources":["src/js/catalog.js","src/js/catalog-slider.js"],"sourcesContent":["import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport renderPagination from './catalog-slider';\nimport { loaderShow, loaderHide } from './loader';\n\nconst movieList = document.querySelector('.cards__list');\nconst messageNoMovie = document.querySelector('.cards__message');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('searchQuery');\nlet currentPage = 1;\nconst paginationCont = document.querySelector('.pagination');\n\nconst apiService = new APIService();\nsetCatalogCards();\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  movieList.innerHTML = '';\n  paginationCont.innerHTML = '';\n\n  let searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    return;\n  }\n\n  movieList.classList.remove('visually-hidden');\n  messageNoMovie.classList.add('visually-hidden');\n  paginationCont.classList.remove('visually-hidden');\n\n  searchMovies(searchValue);\n}\n\nasync function setCatalogCards() {\n  loaderShow();\n\n  try {\n    const response = await apiService.getTrends('week', currentPage);\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.innerHTML = '';\n      paginationCont.classList.add('visually-hidden');\n      loaderHide();\n      return;\n    }\n\n    renderPagination(response.page, response.total_pages);\n\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n    loaderHide();\n  }\n}\n\nasync function searchMovies(query) {\n  loaderShow();\n  try {\n    const response = await apiService.searchMovieByQuery(query, currentPage);\n    console.log(response);\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.innerHTML = '';\n      paginationCont.classList.add('visually-hidden');\n      loaderHide();\n      return;\n    }\n    renderPagination(response.page, response.total_pages, query);\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n    loaderHide();\n  }\n}\n","import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport { loaderShow, loaderHide } from './loader';\nconst apiService = new APIService();\nlet currentQuary;\n\nexport default function renderPagination(currentPage, totalPages, query) {\n  const paginationCont = document.querySelector('.pagination');\n  paginationCont.innerHTML = '';\n\n  if (arguments.length < 3) {\n    query = null;\n  }\n  currentQuary = query;\n  let buttons = [];\n\n  if (totalPages === 2) {\n    if (currentPage === totalPages) {\n      buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n      buttons.push(createButton(currentPage - 1));\n      buttons.push(createButton(totalPages, false));\n\n      buttons.forEach(button => paginationCont.append(button));\n      return;\n    }\n\n    buttons.push(createButton(currentPage, false));\n    buttons.push(createButton(totalPages));\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n    buttons.forEach(button => paginationCont.append(button));\n    return;\n  }\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage === 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage === 1) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 2 && totalPages > 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 2 && totalPages >= 4) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n  }\n\n  buttons.forEach(button => paginationCont.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent = newButton.textContent =\n    additionalClass && additionalClass.includes('arrow')\n      ? ''\n      : pageNum < 10\n      ? '0' + pageNum\n      : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button-current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n  const catalogForm = document.querySelector('.catalog__form');\n  loaderShow();\n\n  try {\n    if (currentQuary === null) {\n      const response = await apiService.getTrends('week', page);\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n\n      renderPagination(response.page, response.total_pages);\n    } else {\n      const response = await apiService.searchMovieByQuery(currentQuary, page);\n\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n      renderPagination(response.page, response.total_pages, currentQuary);\n    }\n    catalogForm.scrollIntoView({ behavior: 'smooth' });\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    loaderHide();\n  }\n}\n"],"names":["$gkCZC","parcelRequire","$c0aaceb2c4fed86e$var$apiService","default","$c0aaceb2c4fed86e$var$currentQuary","$c0aaceb2c4fed86e$export$2e2bcd8739ae039","currentPage","totalPages","query","paginationCont","document","querySelector","innerHTML","arguments","length","buttons","push","$c0aaceb2c4fed86e$var$createButton","forEach","button","append","$c0aaceb2c4fed86e$var$createDotsEl","newDotsEl","createElement","pageNum","isButtonClickable","additionalClass","newButton","baseButton","classList","add","$c0aaceb2c4fed86e$var$createBaseButton","dataset","textContent","includes","addEventListener","$c0aaceb2c4fed86e$var$pageButtonPressed","async","event","page","target","catalogForm","$gjiCh","loaderShow","response","getTrends","movies","results","$eiEnv","total_pages","searchMovieByQuery","scrollIntoView","behavior","loaderHide","error","console","log","$9f350005b1f9b186$var$movieList","$9f350005b1f9b186$var$messageNoMovie","$9f350005b1f9b186$var$searchForm","getElementById","$9f350005b1f9b186$var$searchInput","$9f350005b1f9b186$var$paginationCont","$9f350005b1f9b186$var$apiService","remove","$9f350005b1f9b186$var$setCatalogCards","e","preventDefault","searchValue","value","trim","$9f350005b1f9b186$var$searchMovies"],"version":3,"file":"catalog.330ac002.js.map"}