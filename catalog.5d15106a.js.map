{"mappings":"AAAA,MAGMA,EAAkBC,SAASC,cAAc,kBACzCC,EAAQF,SAASC,cAAc,gBAC/BE,EAAaH,SAASC,cAAc,gBACpCG,EAAeJ,SAASC,cAAc,wBACtCI,EAAgBL,SAASC,cAAc,UACvCK,EAAeN,SAASC,cAAc,kBAE5CF,EAAgBQ,iBAAiB,SAASC,UACxC,IACE,MAAMC,EAAUV,EAAgBW,QAAQD,QAGlCE,QAAiBC,MACrB,sCAAyBH,oEAG3B,IAAKE,EAASE,GACZ,MAAM,IAAIC,MAAM,eAAeH,EAASI,UAG1C,MAAMC,QAAaL,EAASM,OAGN,IAAjBD,GAAgC,IAAxBA,EAAKE,QAAQC,SAAiBH,EAAKE,QAAQ,GAAGE,IAEzD,YADAjB,EAAWkB,MAAMC,QAAU,SAKA,MAAvBC,EAAQP,EAAKE,QAAQ,GAGgBZ,EAA9BkB,IAAM,iCAAiCD,EAAMH,MAE1DlB,EAAMmB,MAAMC,QAAU,cAGhB,IAAIG,SAAQC,IAChBtB,EAAaG,iBAAiB,gBAAiBmB,EAAS,CAAEC,MAAM,GAAO,G,CAEzE,MAAOC,GACPC,QAAQD,MAAMA,GACdzB,EAAWkB,MAAMC,QAAU,O,KAI/BjB,EAAcE,iBAAiB,SAAS,KACtCL,EAAMmB,MAAMC,QAAU,MAAM,IAG9BpB,EAAMK,iBAAiB,SAASuB,IAE1BA,EAAMC,SAAW7B,GACnBG,EAAc2B,OAAO,IAIzB7B,EAAWI,iBAAiB,SAAS,KACnCJ,EAAWkB,MAAMC,QAAU,MAAM,IC7DnC,MAAMW,EAAO,CACXC,QAASlC,SAASC,cAAc,oBAChCkC,cAAenC,SAASC,cAAc,eACtCmC,aAAcpC,SAASC,cAAc,oBAavC,SAASoC,IACPJ,EAAKG,aAAaE,UAAUC,OAAO,mBACnCN,EAAKE,cAAcG,UAAUC,OAAO,U,CAZtCN,EAAKC,QAAQ3B,iBAAiB,QAAS8B,GAEvCJ,EAAKG,aAAa7B,iBAAiB,SAEnC,SAA8BiC,GACxBA,EAAET,SAAWE,EAAKG,cACpBC,G","sources":["src/js/hero-modal-watch-trailer.js","src/js/mobile-menu.js"],"sourcesContent":["const API_KEY = '992758a4802a699e8df27d4d6efc34fb';\nconst BASE_API_URL = 'https://api.themoviedb.org/3';\n\nconst watchTrailerBtn = document.querySelector('.watch-trailer');\nconst modal = document.querySelector('.watch-modal');\nconst modalError = document.querySelector('.modal-error');\nconst modalContent = document.querySelector('.watch-modal-content');\nconst closeModalBtn = document.querySelector('.close');\nconst trailerVideo = document.querySelector('#trailer-video');\n\nwatchTrailerBtn.addEventListener('click', async () => {\n  try {\n    const movieId = watchTrailerBtn.dataset.movieId;\n\n    // Получение списка видео для фильма из API\n    const response = await fetch(\n      `${BASE_API_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`\n    );\n\n    if (!response.ok) {\n      throw new Error(`HTTP error: ${response.status}`);\n    }\n\n    const data = await response.json();\n\n    // Проверка на наличие видео\n    if (!data || data.results.length === 0 || !data.results[0].key) {\n      modalError.style.display = 'block';\n      return;\n    }\n\n    // Получение первого видео из списка\n    const video = data.results[0];\n\n    // Установка источника видео для трейлера на URL видео на YouTube\n    trailerVideo.src = `https://www.youtube.com/embed/${video.key}`;\n\n    modal.style.display = 'block';\n\n    // Ожидание, пока модальное окно полностью раскроется\n    await new Promise(resolve => {\n      modalContent.addEventListener('transitionend', resolve, { once: true });\n    });\n  } catch (error) {\n    console.error(error);\n    modalError.style.display = 'block';\n  }\n});\n\ncloseModalBtn.addEventListener('click', () => {\n  modal.style.display = 'none';\n});\n\nmodal.addEventListener('click', event => {\n  // Если клик был на фоне, а не на содержимом модального окна, закрыть модальное окно\n  if (event.target === modal) {\n    closeModalBtn.click();\n  }\n});\n\nmodalError.addEventListener('click', () => {\n  modalError.style.display = 'none';\n});\n","const refs = {\n  menuBtn: document.querySelector('[data-menu-open]'),\n  menuContainer: document.querySelector('[data-menu]'),\n  menuBackdrop: document.querySelector('[data-backdrop]'),\n};\n\nrefs.menuBtn.addEventListener('click', toggleModal);\n\nrefs.menuBackdrop.addEventListener('click', closeOnBackdropClick);\n\nfunction closeOnBackdropClick(e) {\n  if (e.target === refs.menuBackdrop) {\n    toggleModal();\n  }\n}\n\nfunction toggleModal() {\n  refs.menuBackdrop.classList.toggle('visually-hidden');\n  refs.menuContainer.classList.toggle('is-open');\n}\n"],"names":["$d37f2c6ce0452fc5$var$watchTrailerBtn","document","querySelector","$d37f2c6ce0452fc5$var$modal","$d37f2c6ce0452fc5$var$modalError","$d37f2c6ce0452fc5$var$modalContent","$d37f2c6ce0452fc5$var$closeModalBtn","$d37f2c6ce0452fc5$var$trailerVideo","addEventListener","async","movieId","dataset","response","fetch","ok","Error","status","data","json","results","length","key","style","display","video","src","Promise","resolve","once","error","console","event","target","click","$01a0d922e623affe$var$refs","menuBtn","menuContainer","menuBackdrop","$01a0d922e623affe$var$toggleModal","classList","toggle","e"],"version":3,"file":"catalog.5d15106a.js.map"}