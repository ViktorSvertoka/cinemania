{"mappings":"iiBAAA,ICGIA,EDHJC,EAAAC,EAAA,S,uCCEMC,GAFNF,EAAAC,EAAA,S,uCAEmB,IAAI,EAAAE,EAAAC,UAGR,SAAAC,EAA0BC,EAAaC,EAAYC,GAChE,IAAMC,EAAiBC,SAASC,cAAc,eAC9CF,EAAeG,UAAY,GAEvBC,UAAUC,OAAS,IACrBN,EAAQ,MAEVT,EAAeS,EACfO,QAAQC,IAAIjB,GACZ,IAAIkB,EAAU,GAEd,GAAmB,IAAfV,EACF,OAAID,IAAgBC,GAClBU,EAAQC,KAAKC,EAAab,EAAc,GAAG,EAAM,sBACjDW,EAAQC,KAAKC,EAAab,EAAc,IACxCW,EAAQC,KAAKC,EAAaZ,GAAY,SAEtCU,EAAQG,SAAQ,SAAAC,G,OAAUZ,EAAea,OAAOD,E,MAIlDJ,EAAQC,KAAKC,EAAab,GAAa,IACvCW,EAAQC,KAAKC,EAAaZ,IAC1BU,EAAQC,KAAKC,EAAab,EAAc,GAAG,EAAM,4BACjDW,EAAQG,SAAQ,SAAAC,G,OAAUZ,EAAea,OAAOD,E,KAG9Cf,EAAc,GAChBW,EAAQC,KAAKC,EAAab,EAAc,GAAG,EAAM,sBAG/CA,GAAe,GACjBW,EAAQC,KAAKC,EAAa,GAAG,EAAM,iBAGjCb,GAAe,GACjBW,EAAQC,KAAKK,KAGXjB,GAAe,IACG,IAAhBA,GACFW,EAAQC,KAAKC,EAAab,EAAc,IAE1CW,EAAQC,KAAKC,EAAab,EAAc,KAG1CW,EAAQC,KAAKC,EAAab,GAAa,IAEnCA,GAAeC,EAAa,IAC9BU,EAAQC,KAAKC,EAAab,EAAc,IACpB,IAAhBA,GACFW,EAAQC,KAAKC,EAAab,EAAc,KAIxCA,EAAcC,EAAa,GAC7BU,EAAQC,KAAKK,KAGXjB,GAAeC,EAAa,GAC9BU,EAAQC,KAAKC,EAAaZ,GAAY,EAAM,gBAG1CD,EAAcC,GAChBU,EAAQC,KAAKC,EAAab,EAAc,GAAG,EAAM,uBAGnDW,EAAQG,SAAQ,SAAAC,G,OAAUZ,EAAea,OAAOD,E,IAGlD,SAASG,IACP,IAAMC,EAAaf,SAASgB,cAAc,UAE1C,OADAD,EAAWE,UAAUC,IAAI,qBAClBH,C,CAGT,SAASF,IACP,IAAMM,EAAYnB,SAASgB,cAAc,QAEzC,OADAG,EAAUjB,UAAa,gCAChBiB,C,CAGT,SAASV,EACPW,G,IACAC,IAAAlB,UAAAC,OAAA,YAAAD,UAAA,KAAwBA,UAAA,GACxBmB,EAAAnB,UAAAC,OAAA,YAAAD,UAAA,GAAsBA,UAAA,GAAJ,KAEZoB,EAAYT,IAmBlB,OAlBAS,EAAUC,QAAc,KAAIJ,EAC5BG,EAAUE,YAAcF,EAAUE,YAChCH,GAAmBA,EAAgBI,SAAS,SACxC,GACAN,EAAU,GACV,IAAMA,EACNA,EAEFE,GACFC,EAAUN,UAAUC,IAAII,GAGtBD,EACFE,EAAUI,iBAAiB,QAASC,GAEpCL,EAAUN,UAAUC,IAAI,6BAGnBK,C,UAGMK,EAAkBC,G,OAAlBC,EAAiBC,MAAAC,KAAA7B,U,UAAjB2B,I,OAAAA,EAAfG,EAAA3C,EAAA,CAAA2C,EAAAC,GAAAC,MAAA,SAAAC,EAAiCP,G,IACzBQ,EAIIC,EACAC,EAMAC,EAEAC,E,qEAbJJ,EAAOR,EAAMa,OAAOlB,QAAQa,K,SAGX,OAAjBhD,EAAqB,C,gCACAG,EAAWmD,UAAU,OAAQN,G,OAA9CC,EAAQM,EAAAC,KACRN,EAASD,EAASQ,SAExB,EAAAC,EAAArD,SAAkB6C,EAAQ,gBAE1B5C,EAAiB2C,EAASD,KAAMC,EAASU,a,yCAElBxD,EAAWyD,mBAAmB5D,EAAcgD,G,QAA7DG,EAAQI,EAAAC,KAERJ,EAASD,EAASM,SAExB,EAAAC,EAAArD,SAAkB+C,EAAQ,gBAC1B9C,EAAiB6C,EAASH,KAAMG,EAASQ,YAAa3D,G,0DAGxDgB,QAAQC,IAAGsC,EAAAM,I,2DApBiBnB,MAAAC,KAAA7B,U,CD9GhC,IAAMgD,EAAYnD,SAASC,cAAc,gBACnCmD,EAAiBpD,SAASC,cAAc,mBACxCoD,EAAarD,SAASsD,eAAe,eACrCC,EAAcvD,SAASsD,eAAe,eAEtCE,EAAiBxD,SAASC,cAAc,eAExCwD,EAAa,IAAI,EAAAhE,EAAAC,S,SAwBRgE,I,OAAAA,EAAfzB,EAAA3C,EAAA,CAAA2C,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUE,EAQAC,E,2FARiBkB,EAAWd,UAAU,OA9B9B,G,UAkCkB,KAJ1BL,EAAQM,EAAAC,MAIDC,QAAQ1C,QAAiBkC,EAASQ,QAAO,C,wCAC7Ca,O,OAGHpB,EAASD,EAASQ,SAExB,EAAAC,EAAArD,SAAkB6C,EAAQ,gBAG1B5C,EAAiB2C,EAASD,KAAMC,EAASU,a,kDAGzC3C,QAAQC,IAAGsC,EAAAM,IACXC,EAAUlC,UAAUC,IAAI,mBACxBkC,EAAenC,UAAU2C,OAAO,mBAChCJ,EAAetD,UAAY,GAC3BsD,EAAevC,UAAUC,IAAI,mB,2DAvBHa,MAAAC,KAAA7B,U,UA2Bf0D,I,OAAAA,EAAf5B,EAAA3C,EAAA,CAAA2C,EAAAC,GAAAC,MAAA,SAAAC,EAA4BtC,G,IAElBwC,EAQAC,E,2FARiBkB,EAAWR,mBAAmBnD,EAxDvC,G,UAwDRwC,EAAQM,EAAAC,KACdxC,QAAQC,IAAKgC,GAEmB,IAA5BA,EAASQ,QAAQ1C,QAAiBkC,EAASQ,QAAO,C,wCAC7Ca,O,UAIHpB,EAASD,EAASQ,SAExB,EAAAC,EAAArD,SAAkB6C,EAAQ,gBAEG,IAAzBD,EAASU,YAAiB,C,uBAC5BQ,EAAevC,UAAUC,IAAI,mB,2BAI/BvB,EAAiB2C,EAASD,KAAMC,EAASU,YAAalD,G,kDAItDO,QAAQC,IAAGsC,EAAAM,IACXC,EAAUlC,UAAUC,IAAI,mBACxBkC,EAAenC,UAAU2C,OAAO,mBAChCJ,EAAetD,UAAY,GAC3BsD,EAAevC,UAAUC,IAAI,mB,2DA3BNa,MAAAC,KAAA7B,U,aA3BZuD,EAAe3B,MAAAC,KAAA7B,U,CAvB9B2D,GACAT,EAAW1B,iBAAiB,UAE5B,SAAkBoC,GAChBA,EAAEC,iBAEFb,EAAUjD,UAAY,GACtBsD,EAAetD,UAAY,GAE3B,IAAI+D,EAAcV,EAAYW,MAAMC,OAEpC,IAAKF,EACH,OAGFd,EAAUlC,UAAU2C,OAAO,mBAC3BR,EAAenC,UAAUC,IAAI,mBAC7BsC,EAAevC,UAAU2C,OAAO,mB,SAiCN9D,GAAb+D,EAAY9B,MAAAC,KAAA7B,U,CA9BzBiE,CAAaH,E","sources":["src/js/catalog.js","src/js/catalog-slider.js"],"sourcesContent":["import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport renderPagination from './catalog-slider';\n\nconst movieList = document.querySelector('.cards__list');\nconst messageNoMovie = document.querySelector('.cards__message');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('searchQuery');\nlet currentPage = 1;\nconst paginationCont = document.querySelector('.pagination');\n\nconst apiService = new APIService();\nsetCatalogCards();\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  movieList.innerHTML = '';\n  paginationCont.innerHTML = '';\n\n  let searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    return;\n  }\n\n  movieList.classList.remove('visually-hidden');\n  messageNoMovie.classList.add('visually-hidden');\n  paginationCont.classList.remove('visually-hidden');\n  \n\n  searchMovies(searchValue);\n}\n\nasync function setCatalogCards() {\n  try {\n\n    const response = await apiService.getTrends('week', currentPage);\n\n    \n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n\n    renderPagination(response.page, response.total_pages);\n\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n  }\n}\n\nasync function searchMovies(query) {\n  try {\n    const response = await apiService.searchMovieByQuery(query, currentPage);\n    console.log (response)\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.classList.add('visually-hidden');\n      return\n      \n    }\n    renderPagination(response.page, response.total_pages, query);\n  \n\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n  }\n}\n","import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nconst apiService = new APIService();\nlet currentQuary;\n\nexport default function renderPagination(currentPage, totalPages, query) {\n  const paginationCont = document.querySelector('.pagination');\n  paginationCont.innerHTML = '';\n\n  if (arguments.length < 3) {\n    query = null;\n  }\n  currentQuary = query;\n  console.log(currentQuary);\n  let buttons = [];\n\n  if (totalPages === 2) {\n    if (currentPage === totalPages) {\n      buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n      buttons.push(createButton(currentPage - 1));\n      buttons.push(createButton(totalPages, false));\n\n      buttons.forEach(button => paginationCont.append(button));\n      return;\n    }\n\n    buttons.push(createButton(currentPage, false));\n    buttons.push(createButton(totalPages));\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n    buttons.forEach(button => paginationCont.append(button));\n    return;\n  }\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage === 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage === 1) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 2) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 2) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n  }\n\n  buttons.forEach(button => paginationCont.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent = newButton.textContent =\n    additionalClass && additionalClass.includes('arrow')\n      ? ''\n      : pageNum < 10\n      ? '0' + pageNum\n      : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button-current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n\n  try {\n    if (currentQuary === null) {\n      const response = await apiService.getTrends('week', page);\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n\n      renderPagination(response.page, response.total_pages);\n    } else {\n      const response = await apiService.searchMovieByQuery(currentQuary, page);\n\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n      renderPagination(response.page, response.total_pages, currentQuary);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n"],"names":["$8e21ec27a569e975$var$currentQuary","$bpxeT","parcelRequire","$8e21ec27a569e975$var$apiService","$7r3lF","default","$8e21ec27a569e975$export$2e2bcd8739ae039","currentPage","totalPages","query","paginationCont","document","querySelector","innerHTML","arguments","length","console","log","buttons","push","$8e21ec27a569e975$var$createButton","forEach","button","append","$8e21ec27a569e975$var$createDotsEl","$8e21ec27a569e975$var$createBaseButton","baseButton","createElement","classList","add","newDotsEl","pageNum","isButtonClickable","additionalClass","newButton","dataset","textContent","includes","addEventListener","$8e21ec27a569e975$var$pageButtonPressed","event","$8e21ec27a569e975$var$_pageButtonPressed","apply","this","$parcel$interopDefault","$2TvXO","mark","_callee","page","response","movies","response1","movies1","target","getTrends","_ctx","sent","results","$dYgbB","total_pages","searchMovieByQuery","t0","$01039996e00cb7ba$var$movieList","$01039996e00cb7ba$var$messageNoMovie","$01039996e00cb7ba$var$searchForm","getElementById","$01039996e00cb7ba$var$searchInput","$01039996e00cb7ba$var$paginationCont","$01039996e00cb7ba$var$apiService","$01039996e00cb7ba$var$_setCatalogCards","error","remove","$01039996e00cb7ba$var$_searchMovies","$01039996e00cb7ba$var$setCatalogCards","e","preventDefault","searchValue","value","trim","$01039996e00cb7ba$var$searchMovies"],"version":3,"file":"catalog.85af2825.js.map"}