{"mappings":"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","sources":["src/js/catalog.js","src/js/catalog-slider.js"],"sourcesContent":["import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport renderPagination from './catalog-slider';\nimport { loaderShow, loaderHide } from './loader';\n\nconst movieList = document.querySelector('.cards__list');\nconst messageNoMovie = document.querySelector('.cards__message');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('searchQuery');\nlet currentPage = 1;\nconst paginationCont = document.querySelector('.pagination');\n\nconst apiService = new APIService();\nsetCatalogCards();\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  movieList.innerHTML = '';\n  paginationCont.innerHTML = '';\n\n  let searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    return;\n  }\n\n  movieList.classList.remove('visually-hidden');\n  messageNoMovie.classList.add('visually-hidden');\n  paginationCont.classList.remove('visually-hidden');\n\n  searchMovies(searchValue);\n}\n\nasync function setCatalogCards() {\n  loaderShow();\n\n  try {\n    const response = await apiService.getTrends('week', currentPage);\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.innerHTML = '';\n      paginationCont.classList.add('visually-hidden');\n      loaderHide();\n      return;\n    }\n\n    renderPagination(response.page, response.total_pages);\n\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n    loaderHide();\n  }\n}\n\nasync function searchMovies(query) {\n  loaderShow();\n  try {\n    const response = await apiService.searchMovieByQuery(query, currentPage);\n    console.log(response);\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.innerHTML = '';\n      paginationCont.classList.add('visually-hidden');\n      loaderHide();\n      return;\n    }\n    renderPagination(response.page, response.total_pages, query);\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.innerHTML = '';\n    paginationCont.classList.add('visually-hidden');\n    loaderHide();\n  }\n}\n","import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport { loaderShow, loaderHide } from './loader';\nconst apiService = new APIService();\nlet currentQuary;\n\nexport default function renderPagination(currentPage, totalPages, query) {\n  const paginationCont = document.querySelector('.pagination');\n  paginationCont.innerHTML = '';\n\n  if (arguments.length < 3) {\n    query = null;\n  }\n  currentQuary = query;\n  let buttons = [];\n\n  if (totalPages === 2) {\n    if (currentPage === totalPages) {\n      buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n      buttons.push(createButton(currentPage - 1));\n      buttons.push(createButton(totalPages, false));\n\n      buttons.forEach(button => paginationCont.append(button));\n      return;\n    }\n\n    buttons.push(createButton(currentPage, false));\n    buttons.push(createButton(totalPages));\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n    buttons.forEach(button => paginationCont.append(button));\n    return;\n  }\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage === 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage === 1) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 2 && totalPages > 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 2 && totalPages >= 4) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n  }\n\n  buttons.forEach(button => paginationCont.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent = newButton.textContent =\n    additionalClass && additionalClass.includes('arrow')\n      ? ''\n      : pageNum < 10\n      ? '0' + pageNum\n      : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button-current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n  const catalogForm = document.querySelector('.catalog__form');\n  loaderShow();\n\n  try {\n    if (currentQuary === null) {\n      const response = await apiService.getTrends('week', page);\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n\n      renderPagination(response.page, response.total_pages);\n    } else {\n      const response = await apiService.searchMovieByQuery(currentQuary, page);\n\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n      renderPagination(response.page, response.total_pages, currentQuary);\n    }\n    catalogForm.scrollIntoView({ behavior: 'smooth' });\n    loaderHide();\n  } catch (error) {\n    console.log(error);\n    loaderHide();\n  }\n}\n"],"names":["$8e21ec27a569e975$var$currentQuary","$bpxeT","parcelRequire","$8e21ec27a569e975$var$apiService","$7r3lF","default","$8e21ec27a569e975$export$2e2bcd8739ae039","currentPage","totalPages","query","paginationCont","document","querySelector","innerHTML","arguments","length","buttons","push","$8e21ec27a569e975$var$createButton","forEach","button","append","$8e21ec27a569e975$var$createDotsEl","$8e21ec27a569e975$var$createBaseButton","baseButton","createElement","classList","add","newDotsEl","pageNum","isButtonClickable","additionalClass","newButton","dataset","textContent","includes","addEventListener","$8e21ec27a569e975$var$pageButtonPressed","event","$8e21ec27a569e975$var$_pageButtonPressed","apply","this","$parcel$interopDefault","$2TvXO","mark","_callee","page","catalogForm","response","movies","response1","movies1","target","$kvC6y","loaderShow","getTrends","_ctx","sent","results","$dYgbB","total_pages","searchMovieByQuery","scrollIntoView","behavior","loaderHide","console","log","t0","$01039996e00cb7ba$var$movieList","$01039996e00cb7ba$var$messageNoMovie","$01039996e00cb7ba$var$searchForm","getElementById","$01039996e00cb7ba$var$searchInput","$01039996e00cb7ba$var$paginationCont","$01039996e00cb7ba$var$apiService","$01039996e00cb7ba$var$_setCatalogCards","error","remove","$01039996e00cb7ba$var$_searchMovies","$01039996e00cb7ba$var$setCatalogCards","e","preventDefault","searchValue","value","trim","$01039996e00cb7ba$var$searchMovies"],"version":3,"file":"catalog.07d3cecc.js.map"}