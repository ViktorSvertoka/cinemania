!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequire1134;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire1134=a);var s,u=a("bpxeT"),l=a("2TvXO"),o=a("7r3lF"),i=a("dYgbB"),d=(u=a("bpxeT"),l=a("2TvXO"),o=a("7r3lF"),i=a("dYgbB"),a("kvC6y")),c=new(0,o.default);function p(e,t,r){var n=document.querySelector(".pagination");n.innerHTML="",arguments.length<3&&(r=null),s=r;var a=[];if(2===t)return e===t?(a.push(v(e-1,!0,"button-arrow-left")),a.push(v(e-1)),a.push(v(t,!1)),void a.forEach((function(e){return n.append(e)}))):(a.push(v(e,!1)),a.push(v(t)),a.push(v(e+1,!0,"button-arrow-right")),void a.forEach((function(e){return n.append(e)})));e>1&&a.push(v(e-1,!0,"button-arrow-left")),e>=4&&a.push(v(1,!0,"first-button")),e>=4&&a.push(h()),e>=2&&(3===e&&a.push(v(e-2)),a.push(v(e-1))),a.push(v(e,!1)),e<=t-1&&(a.push(v(e+1)),1===e&&a.push(v(e+2))),e<t-2&&t>4&&a.push(h()),e<=t-2&&t>=4&&a.push(v(t,!0,"last-button")),e<t&&a.push(v(e+1,!0,"button-arrow-right")),a.forEach((function(e){return n.append(e)}))}function f(){var e=document.createElement("button");return e.classList.add("pagination-button"),e}function h(){var e=document.createElement("span");return e.innerHTML='<span class="dots">...</span>',e}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=f();return n.dataset.page=e,n.textContent=n.textContent=r&&r.includes("arrow")?"":e<10?"0"+e:e,r&&n.classList.add(r),t?n.addEventListener("click",g):n.classList.add("pagination-button-current"),n}function g(e){return y.apply(this,arguments)}function y(){return(y=e(u)(e(l).mark((function t(r){var n,a,u,o,f,h;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.target.dataset.page,a=document.querySelector(".catalog__form"),(0,d.loaderShow)(),e.prev=3,null!==s){e.next=13;break}return e.next=7,c.getTrends("week",n);case 7:u=e.sent,o=u.results,(0,i.default)(o,".cards__list"),p(u.page,u.total_pages),e.next=19;break;case 13:return e.next=15,c.searchMovieByQuery(s,n);case 15:f=e.sent,h=f.results,(0,i.default)(h,".cards__list"),p(f.page,f.total_pages,s);case 19:a.scrollIntoView({behavior:"smooth"}),(0,d.loaderHide)(),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),console.log(e.t0),(0,d.loaderHide)();case 27:case"end":return e.stop()}}),t,null,[[3,23]])})))).apply(this,arguments)}d=a("kvC6y");var b=document.querySelector(".cards__list"),m=document.querySelector(".cards__message"),w=document.getElementById("search-form"),x=document.getElementById("searchQuery"),L=document.querySelector(".pagination"),_=new(0,o.default);function k(){return(k=e(u)(e(l).mark((function t(){var r,n;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.loaderShow)(),e.prev=1,e.next=4,_.getTrends("week",1);case 4:if(0!==(r=e.sent).results.length&&r.results){e.next=7;break}return e.abrupt("return",error);case 7:if(n=r.results,(0,i.default)(n,".cards__list"),1!==r.total_pages){e.next=14;break}return L.innerHTML="",L.classList.add("visually-hidden"),(0,d.loaderHide)(),e.abrupt("return");case 14:p(r.page,r.total_pages),(0,d.loaderHide)(),e.next=26;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),b.classList.add("visually-hidden"),m.classList.remove("visually-hidden"),L.innerHTML="",L.classList.add("visually-hidden"),(0,d.loaderHide)();case 26:case"end":return e.stop()}}),t,null,[[1,18]])})))).apply(this,arguments)}function T(){return(T=e(u)(e(l).mark((function t(r){var n,a;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.loaderShow)(),e.prev=1,e.next=4,_.searchMovieByQuery(r,1);case 4:if(n=e.sent,console.log(n),0!==n.results.length&&n.results){e.next=8;break}return e.abrupt("return",error);case 8:if(a=n.results,(0,i.default)(a,".cards__list"),1!==n.total_pages){e.next=15;break}return L.innerHTML="",L.classList.add("visually-hidden"),(0,d.loaderHide)(),e.abrupt("return");case 15:p(n.page,n.total_pages,r),(0,d.loaderHide)(),e.next=27;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),b.classList.add("visually-hidden"),m.classList.remove("visually-hidden"),L.innerHTML="",L.classList.add("visually-hidden"),(0,d.loaderHide)();case 27:case"end":return e.stop()}}),t,null,[[1,19]])})))).apply(this,arguments)}!function(){k.apply(this,arguments)}(),w.addEventListener("submit",(function(e){e.preventDefault(),b.innerHTML="",L.innerHTML="";var t=x.value.trim();if(!t)return;b.classList.remove("visually-hidden"),m.classList.add("visually-hidden"),L.classList.remove("visually-hidden"),function(e){T.apply(this,arguments)}(t)}))}();
//# sourceMappingURL=catalog.07d3cecc.js.map
