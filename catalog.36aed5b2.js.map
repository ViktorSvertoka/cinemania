{"mappings":"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","sources":["src/js/catalog.js","src/js/catalog-slider.js"],"sourcesContent":["import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nimport renderPagination from './catalog-slider';\n\nconst movieList = document.querySelector('.cards__list');\nconst messageNoMovie = document.querySelector('.cards__message');\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('searchQuery');\nlet currentPage = 1;\nconst paginationCont = document.querySelector('.pagination');\n\nconst apiService = new APIService();\nsetCatalogCards();\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(e) {\n  e.preventDefault();\n\n  movieList.innerHTML = '';\n\n  let searchValue = searchInput.value.trim();\n\n  if (!searchValue) {\n    return;\n  }\n\n  movieList.classList.remove('visually-hidden');\n  messageNoMovie.classList.add('visually-hidden');\n  paginationCont.classList.remove('visually-hidden');\n  \n\n  searchMovies(searchValue);\n}\n\nasync function setCatalogCards() {\n  try {\n\n    const response = await apiService.getTrends('week', currentPage);\n\n    \n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n\n    renderPagination(response.page, response.total_pages);\n\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.classList.add('visually-hidden');\n  }\n}\n\nasync function searchMovies(query) {\n  try {\n    const response = await apiService.searchMovieByQuery(query, currentPage);\n    console.log (response)\n\n    if (response.results.length === 0 || !response.results) {\n      return error;\n    }\n\n\n    const movies = response.results;\n\n    renderMoviesCards(movies, '.cards__list');\n\n    if (response.total_pages === 1) {\n      paginationCont.classList.add('visually-hidden');\n      return\n      \n    }\n    renderPagination(response.page, response.total_pages, query);\n  \n\n  } catch (error) {\n    console.log(error);\n    movieList.classList.add('visually-hidden');\n    messageNoMovie.classList.remove('visually-hidden');\n    paginationCont.classList.add('visually-hidden');\n  }\n}\n","import APIService from './api-service-main';\nimport renderMoviesCards from './cards-rendering';\nconst apiService = new APIService();\nlet currentQuary;\n\nexport default function renderPagination(currentPage, totalPages, query) {\n  const paginationCont = document.querySelector('.pagination');\n  paginationCont.innerHTML = '';\n\n  if (arguments.length < 3) {\n    query = null;\n  }\n  currentQuary = query;\n  console.log(currentQuary);\n  let buttons = [];\n\n  if (totalPages === 2) {\n    if (currentPage === totalPages) {\n      buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n      buttons.push(createButton(currentPage - 1));\n      buttons.push(createButton(totalPages, false));\n\n      buttons.forEach(button => paginationCont.append(button));\n      return;\n    }\n\n    buttons.push(createButton(currentPage, false));\n    buttons.push(createButton(totalPages));\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n    buttons.forEach(button => paginationCont.append(button));\n    return;\n  }\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'button-arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage === 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage === 1) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 2) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 2) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'button-arrow-right'));\n  }\n\n  buttons.forEach(button => paginationCont.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent = newButton.textContent =\n    additionalClass && additionalClass.includes('arrow')\n      ? ''\n      : pageNum < 10\n      ? '0' + pageNum\n      : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button-current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n\n  try {\n    if (currentQuary === null) {\n      const response = await apiService.getTrends('week', page);\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n\n      renderPagination(response.page, response.total_pages);\n    } else {\n      const response = await apiService.searchMovieByQuery(currentQuary, page);\n\n      const movies = response.results;\n\n      renderMoviesCards(movies, '.cards__list');\n      renderPagination(response.page, response.total_pages, currentQuary);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\n"],"names":["$gkCZC","parcelRequire","$c0aaceb2c4fed86e$var$apiService","default","$c0aaceb2c4fed86e$var$currentQuary","$c0aaceb2c4fed86e$export$2e2bcd8739ae039","currentPage","totalPages","query","paginationCont","document","querySelector","innerHTML","arguments","length","console","log","buttons","push","$c0aaceb2c4fed86e$var$createButton","forEach","button","append","$c0aaceb2c4fed86e$var$createDotsEl","newDotsEl","createElement","pageNum","isButtonClickable","additionalClass","newButton","baseButton","classList","add","$c0aaceb2c4fed86e$var$createBaseButton","dataset","textContent","includes","addEventListener","$c0aaceb2c4fed86e$var$pageButtonPressed","async","event","page","target","response","getTrends","movies","results","$eiEnv","total_pages","searchMovieByQuery","error","$9f350005b1f9b186$var$movieList","$9f350005b1f9b186$var$messageNoMovie","$9f350005b1f9b186$var$searchForm","getElementById","$9f350005b1f9b186$var$searchInput","$9f350005b1f9b186$var$paginationCont","$9f350005b1f9b186$var$apiService","remove","$9f350005b1f9b186$var$setCatalogCards","e","preventDefault","searchValue","value","trim","$9f350005b1f9b186$var$searchMovies"],"version":3,"file":"catalog.36aed5b2.js.map"}